<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Watch Better</title>
        <!-- plugins:css -->
        <link rel="stylesheet" href="assets/vendors/mdi/css/materialdesignicons.min.css">
        <link rel="stylesheet" href="assets/vendors/flag-icon-css/css/flag-icon.min.css">
        <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
        <!-- endinject -->
        <!-- Plugin css for this page -->
        <link rel="stylesheet" href="assets/vendors/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
        <!-- End plugin css for this page -->
        <!-- inject:css -->
        <!-- endinject -->
        <!-- Layout styles -->
        <link rel="stylesheet" href="assets/css/style.css">
        <!-- End layout styles -->
        <link rel="shortcut icon" href="upload/watch better.png" />
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    </head>
    <body>
        <div class="container-scroller">
           
            
            <nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
                <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
             </div>
                <div class="navbar-menu-wrapper d-flex align-items-stretch">
                    <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                        <span class="mdi mdi-menu"></span>
                    </button>
                   
                    <ul class="navbar-nav navbar-nav-right">
                        
                      
                       
                        <li class="nav-item nav-profile dropdown">
                            <a class="nav-link dropdown-toggle" id="profileDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
                                <div class="nav-profile-img">
                                    <img src="upload/admin.png" alt="image">
                                </div>
                                <div class="nav-profile-text">
                                    <p class="mb-1 text-black">Watch Better</p>
                                </div>
                            </a>
                            <div class="dropdown-menu navbar-dropdown dropdown-menu-center p-0 border-1 font-size-sm" aria-labelledby="profileDropdown" data-x-placement="bottom-end">
                                <div class="p-3 text-center bg-primary">
                                    <img class="img-avatar img-avatar48 img-avatar-thumb" src="upload/admin.png" alt="">
                                </div>

                                   
                                    <a class="dropdown-item py-1 d-flex align-items-center justify-content-between" href="#">
                                        <span>Profile</span>
                                        <span class="p-0">
                                            <span class="badge badge-success">1</span>
                                            <i class="mdi mdi-account-outline ms-1"></i>
                                        </span>
                                    </a>
                                    <a class="dropdown-item py-1 d-flex align-items-center justify-content-between" href="javascript:void(0)">
                                        <span>Settings</span>
                                        <i class="mdi mdi-settings"></i>
                                    </a>
                                    <div role="separator" class="dropdown-divider"></div>
                                    <h5 class="dropdown-header text-uppercase  ps-2 text-dark mt-2">Actions</h5>
                                    <a class="dropdown-item py-1 d-flex align-items-center justify-content-between" href="#">
                                        <span>Lock Account</span>
                                        <i class="mdi mdi-lock ms-1"></i>
                                    </a>
                                    <a class="dropdown-item py-1 d-flex align-items-center justify-content-between" href="#">
                                        <span>Log Out</span>
                                        <i class="mdi mdi-logout ms-1"></i>
                                    </a>
<!--                                </div>-->
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            
                            <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list" aria-labelledby="messageDropdown">
                               
                                
                                
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item preview-item">
                                    <div class="preview-thumbnail">
                                        <img src="assets/images/faces/face2.jpg" alt="image" class="profile-pic">
                                    </div>
                                   
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item preview-item">
                                    <div class="preview-thumbnail">
                                        <img src="assets/images/faces/face3.jpg" alt="image" class="profile-pic">
                                    </div>
                                  
                                </a>
                                
                        </li>
                        
                              
                  
                
            </nav>
           
            <div class="container-fluid page-body-wrapper">
                
                <nav class="sidebar sidebar-offcanvas" id="sidebar">
                    <ul class="nav">
                        
                        <li class="nav-item">
                            <a class="nav-link" href="home.php">
                                <span class="icon-bg"><i class="mdi mdi-cube menu-icon"></i></span>
                                <span class="menu-title">Dashboard</span>
                            </a>
                        </li>
                       
                        <li class="nav-item">
                            <a class="nav-link" href="Managemovie.php">
                                <span class="icon-bg"><i class="mdi mdi-contacts menu-icon"></i></span>
                                <span class="menu-title">Manage movie</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="screen.php">
                                <span class="icon-bg"><i class="mdi mdi-format-list-bulleted menu-icon"></i></span>
                                <span class="menu-title">Manage Screen</span>
                            </a>
                        </li>
                       
                        <li class="nav-item">
                            <a class="nav-link" href="reports.php">
                                <span class="icon-bg"><i class="mdi mdi-lock menu-icon"></i></span>
                                <span class="menu-title">View reports</span>
                                
                            </a>
                         
                        </li>
                       
                                        
                </nav>
                <!-- partial -->
                <div class="main-panel">
                    <div class="content-wrapper">
                        <div class="d-xl-flex justify-content-between align-items-start">
                            <h2 class="text-dark font-weight-bold mb-2"> Overview dashboard </h2>
                            <div class="d-sm-flex justify-content-xl-between align-items-center mb-2">
                                
                                <div class="dropdown ms-0 ml-md-4 mt-2 mt-lg-0">
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton1">
                                       
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="d-sm-flex justify-content-between align-items-center transaparent-tab-border {">


<div
id="myChart" style="width:100%; max-width:600px; height:500px;" class="d-sm-flex justify-content-between align-items-center transaparent-tab-border">
</div>

<?php
    // Establish a database connection
    $conn = mysqli_connect("localhost", "root", "", "in_movie");
    if (!$conn) {
        die("Connection failed: " . mysqli_connect_error());
    }

    // Fetch data for all ratings (1 to 5)
    $ratingData = array();
    for ($rating = 1; $rating <= 5; $rating++) {
        $sql = "SELECT COUNT(*) as count FROM ratings WHERE rating = $rating";
        $res = mysqli_query($conn, $sql);
        $row = mysqli_fetch_assoc($res);
        $ratingData[$rating] = $row['count'];
    }
    ?>

    <!-- Add the JavaScript code for Google Charts -->
    <script>
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        const data = google.visualization.arrayToDataTable([
            ['', 'Count'],
            ['Rating 1', <?php echo $ratingData[1]; ?>],
            ['Rating 2', <?php echo $ratingData[2]; ?>],
            ['Rating 3', <?php echo $ratingData[3]; ?>],
            ['Rating 4', <?php echo $ratingData[4]; ?>],
            ['Rating 5', <?php echo $ratingData[5]; ?>],
        ]);

        const options = {
            title: 'System Ratings',
            is3D: true,
        };

        const chart = new google.visualization.PieChart(document.getElementById('myChart'));
        chart.draw(data, options);
    }
    </script>
    
    <?php
    $sql1="SELECT * FROM insertmovie"    
    
    ?>
  <!-- booking graph -->
    
    <div id="myChart1" style="width:100%; max-width:600px; height:500px;"></div>



    <script>
        google.charts.load('current', { packages: ['corechart'] });
        google.charts.setOnLoadCallback(animateGraph);

        function animateGraph() {
            const data = google.visualization.arrayToDataTable([
                ['Price', 'Size'],
                [50, 7],
                [60, 8],
                [70, 8],
                [80, 9],
                [90, 9],
                [100, 9],
                [110, 10],
                [120, 11],
                [130, 14],
                [140, 14],
                [150, 15]
            ]);

            const options = {
                title: 'Bookings',
                hAxis: { title: 'Square Meters' },
                vAxis: { title: 'Price in Millions' },
                legend: 'none'
            };

            const chart = new google.visualization.LineChart(document.getElementById('myChart1'));

            function drawChart() {
                chart.draw(data, options);
            }

            // Define a variable for animation step
            let animationStep = 0;

            // Animate the graph at regular intervals (e.g., every 2 seconds)
            setInterval(() => {
                // Increment animation step
                animationStep++;

                // Update the data with new values based on the animation step
                const newData = google.visualization.arrayToDataTable([
                    ['Price', 'Size'],
                    [50, 7 + animationStep],
                    [60, 8 + animationStep],
                    [70, 8 + animationStep],
                    [80, 9 + animationStep],
                    [90, 9 + animationStep],
                    [100, 9 + animationStep],
                    [110, 10 + animationStep],
                    [120, 11 + animationStep],
                    [130, 14 + animationStep],
                    [140, 14 + animationStep],
                    [150, 15 + animationStep]
                ]);

                // Redraw the chart with the updated data
                chart.draw(newData, options);
            }, 2000); // Update the animation interval as needed (e.g., 2000 milliseconds = 2 seconds)
        }
    </script>





                                                </div>
                                               
                                            </div>
                                           
                                            
                                                
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                        <!-- content-wrapper ends -->
                        <!-- partial:partials/_footer.html -->
                        <footer class="footer">
                            <div class="footer-inner-wraper">
                                <div class="d-sm-flex justify-content-center justify-content-sm-between py-2">
                                    <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© <a href="https://www.bootstrapdash.com/" target="_blank">bootstrapdash.com </a>2021</span>
                                    <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Only the best <a href="https://www.bootstrapdash.com/" target="_blank"> Bootstrap dashboard </a> templates</span>
                                </div>
                            </div>
                        </footer>
                        <!-- partial -->
                    
                    <!-- main-panel ends -->
                
                <!-- page-body-wrapper ends -->
            
            <!-- container-scroller -->
            <!-- plugins:js -->
            <script src="assets/vendors/js/vendor.bundle.base.js"></script>
            <!-- endinject -->
            <!-- Plugin js for this page -->
            <script src="assets/vendors/chart.js/Chart.min.js"></script>
            <script src="assets/vendors/jquery-circle-progress/js/circle-progress.min.js"></script>
            <script src="assets/js/jquery.cookie.js" type="text/javascript"></script>
            <!-- End plugin js for this page -->
            <!-- inject:js -->
            <script src="assets/js/off-canvas.js"></script>
            <script src="assets/js/hoverable-collapse.js"></script>
            <script src="assets/js/misc.js"></script>
            <!-- endinject -->
            <!-- Custom js for this page -->
            <script src="assets/js/dashboard.js"></script>
            <!-- End custom js for this page -->
        </body>
    </html>